{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\echan\\\\Desktop\\\\REact-cursoCompeto\\\\react-complete-guide-course-resources-main\\\\code\\\\22 Authentication\\\\01-starting-project\\\\frontend\\\\src\\\\components\\\\EventForm.jsx\";\nimport React from \"react\";\nimport { Form, useNavigate, useNavigation, useActionData, json, redirect } from \"react-router-dom\";\nimport classes from \"./EventForm.module.css\";\nimport { getUserToken } from \"../utils/auth\";\nfunction EventForm({\n  method,\n  event\n}) {\n  const data = useActionData();\n  const navigate = useNavigate();\n  const navigation = useNavigation();\n  const isSubmitting = navigation.state === \"submitting\";\n  function cancelHandler() {\n    navigate(\"..\");\n  }\n  return /*#__PURE__*/React.createElement(Form, {\n    method: method,\n    className: classes.form,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 26,\n      columnNumber: 5\n    }\n  }, data && data.errors && /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 9\n    }\n  }, Object.values(data.errors).map(err => /*#__PURE__*/React.createElement(\"li\", {\n    key: err,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 13\n    }\n  }, err))), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 9\n    }\n  }, \"Title\"), /*#__PURE__*/React.createElement(\"input\", {\n    id: \"title\",\n    type: \"text\",\n    name: \"title\",\n    required: true,\n    defaultValue: event ? event.title : \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"image\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 9\n    }\n  }, \"Image\"), /*#__PURE__*/React.createElement(\"input\", {\n    id: \"image\",\n    type: \"url\",\n    name: \"image\",\n    required: true,\n    defaultValue: event ? event.image : \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"date\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 9\n    }\n  }, \"Date\"), /*#__PURE__*/React.createElement(\"input\", {\n    id: \"date\",\n    type: \"date\",\n    name: \"date\",\n    required: true,\n    defaultValue: event ? event.date : \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"description\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }\n  }, \"Description\"), /*#__PURE__*/React.createElement(\"textarea\", {\n    id: \"description\",\n    name: \"description\",\n    rows: \"5\",\n    required: true,\n    defaultValue: event ? event.description : \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.actions,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    onClick: cancelHandler,\n    disabled: isSubmitting,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 9\n    }\n  }, \"Cancel\"), /*#__PURE__*/React.createElement(\"button\", {\n    disabled: isSubmitting,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }\n  }, isSubmitting ? \"Submitting...\" : \"Save\")));\n}\nexport default EventForm;\nexport async function action({\n  request,\n  params\n}) {\n  const method = request.method;\n  const data = await request.formData();\n  const eventData = {\n    title: data.get(\"title\"),\n    image: data.get(\"image\"),\n    date: data.get(\"date\"),\n    description: data.get(\"description\")\n  };\n  let url = \"http://localhost:8080/events\";\n  if (method === \"PATCH\") {\n    const eventId = params.eventId;\n    url = \"http://localhost:8080/events/\" + eventId;\n  }\n  const token = getUserToken();\n  const response = await fetch(url, {\n    method: method,\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: \"Bearer \" + token\n    },\n    body: JSON.stringify(eventData)\n  });\n  if (response.status === 422) {\n    return response;\n  }\n  if (!response.ok) {\n    throw json({\n      message: \"Could not save event.\"\n    }, {\n      status: 500\n    });\n  }\n  return redirect(\"/events\");\n}","map":{"version":3,"names":["React","Form","useNavigate","useNavigation","useActionData","json","redirect","classes","getUserToken","EventForm","method","event","data","navigate","navigation","isSubmitting","state","cancelHandler","createElement","className","form","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","errors","Object","values","map","err","key","htmlFor","id","type","name","required","defaultValue","title","image","date","rows","description","actions","onClick","disabled","action","request","params","formData","eventData","get","url","eventId","token","response","fetch","headers","Authorization","body","JSON","stringify","status","ok","message"],"sources":["C:/Users/echan/Desktop/REact-cursoCompeto/react-complete-guide-course-resources-main/code/22 Authentication/01-starting-project/frontend/src/components/EventForm.jsx"],"sourcesContent":["import React from \"react\"\nimport {\n  Form,\n  useNavigate,\n  useNavigation,\n  useActionData,\n  json,\n  redirect,\n} from \"react-router-dom\"\n\nimport classes from \"./EventForm.module.css\"\nimport { getUserToken } from \"../utils/auth\"\n\nfunction EventForm({ method, event }) {\n  const data = useActionData()\n  const navigate = useNavigate()\n  const navigation = useNavigation()\n\n  const isSubmitting = navigation.state === \"submitting\"\n\n  function cancelHandler() {\n    navigate(\"..\")\n  }\n\n  return (\n    <Form method={method} className={classes.form}>\n      {data && data.errors && (\n        <ul>\n          {Object.values(data.errors).map((err) => (\n            <li key={err}>{err}</li>\n          ))}\n        </ul>\n      )}\n      <p>\n        <label htmlFor=\"title\">Title</label>\n        <input\n          id=\"title\"\n          type=\"text\"\n          name=\"title\"\n          required\n          defaultValue={event ? event.title : \"\"}\n        />\n      </p>\n      <p>\n        <label htmlFor=\"image\">Image</label>\n        <input\n          id=\"image\"\n          type=\"url\"\n          name=\"image\"\n          required\n          defaultValue={event ? event.image : \"\"}\n        />\n      </p>\n      <p>\n        <label htmlFor=\"date\">Date</label>\n        <input\n          id=\"date\"\n          type=\"date\"\n          name=\"date\"\n          required\n          defaultValue={event ? event.date : \"\"}\n        />\n      </p>\n      <p>\n        <label htmlFor=\"description\">Description</label>\n        <textarea\n          id=\"description\"\n          name=\"description\"\n          rows=\"5\"\n          required\n          defaultValue={event ? event.description : \"\"}\n        />\n      </p>\n      <div className={classes.actions}>\n        <button type=\"button\" onClick={cancelHandler} disabled={isSubmitting}>\n          Cancel\n        </button>\n        <button disabled={isSubmitting}>\n          {isSubmitting ? \"Submitting...\" : \"Save\"}\n        </button>\n      </div>\n    </Form>\n  )\n}\n\nexport default EventForm\n\nexport async function action({ request, params }) {\n  const method = request.method\n  const data = await request.formData()\n\n  const eventData = {\n    title: data.get(\"title\"),\n    image: data.get(\"image\"),\n    date: data.get(\"date\"),\n    description: data.get(\"description\"),\n  }\n\n  let url = \"http://localhost:8080/events\"\n\n  if (method === \"PATCH\") {\n    const eventId = params.eventId\n    url = \"http://localhost:8080/events/\" + eventId\n  }\n  const token = getUserToken()\n  const response = await fetch(url, {\n    method: method,\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: \"Bearer \" + token,\n    },\n\n    body: JSON.stringify(eventData),\n  })\n\n  if (response.status === 422) {\n    return response\n  }\n\n  if (!response.ok) {\n    throw json({ message: \"Could not save event.\" }, { status: 500 })\n  }\n\n  return redirect(\"/events\")\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}